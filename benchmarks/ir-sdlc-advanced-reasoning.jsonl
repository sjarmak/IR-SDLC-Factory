{"task_id": "kubernetes__kubernetes-requirement_disambiguation-434760bc461f", "task_type": "requirement_disambiguation", "category": "A", "repo_name": "kubernetes/kubernetes", "repo_url": "https://github.com/kubernetes/kubernetes", "commit_hash": "HEAD", "scenario": "A product manager says: \"We need to add support for GPU scheduling.\"\n\nThe agent must:\n1. Identify that GPU scheduling already exists (device plugins, extended resources)\n2. Clarify what's actually being asked (new GPU type? different scheduling policy?)\n3. Reference the existing abstractions (ResourceName, DevicePlugin interface)\n4. Propose clarifying questions based on repo conventions", "vague_prompt": "Add GPU scheduling support to Kubernetes", "available_context": {}, "ground_truth": {"existing_abstractions": ["pkg/kubelet/cm/devicemanager/manager.go", "staging/src/k8s.io/api/core/v1/types.go:ResourceName", "pkg/scheduler/framework/plugins/noderesources/"], "clarifying_questions": ["Which GPU vendor/type (NVIDIA, AMD, Intel)?", "Scheduling policy: bin-packing, spread, topology-aware?", "MIG (Multi-Instance GPU) support needed?"], "repo_conventions": ["Device plugins register via gRPC", "Extended resources use 'nvidia.com/gpu' naming", "Scheduler plugins implement Score/Filter interfaces"]}, "evaluation_criteria": {"success_signals": ["References existing device plugin system", "Identifies extended resources mechanism", "Asks clarifying questions before proposing changes", "Mentions topology manager for NUMA-aware scheduling"], "failure_signals": ["Proposes new resource type without checking existing", "Invents new scheduling mechanism instead of using plugins", "Starts implementing without disambiguation"], "required_artifacts": ["list of existing relevant abstractions", "clarifying questions for PM", "links to existing implementations"], "scoring_rubric": {"identifies_existing_abstractions": 0.3, "asks_clarifying_questions": 0.3, "references_repo_conventions": 0.2, "proposes_minimal_delta": 0.2}}, "difficulty": "expert", "tags": ["disambiguation", "existing-abstractions", "scheduler"], "created_at": "2025-12-29T18:00:44.996965+00:00"}
{"task_id": "grafana__grafana-architecture_delta-5ea749b7d0cb", "task_type": "architecture_delta", "category": "A", "repo_name": "grafana/grafana", "repo_url": "https://github.com/grafana/grafana", "commit_hash": "HEAD", "scenario": "Request: \"Add support for alerting on Loki log patterns.\"\n\nThe agent must determine:\n1. What already exists (Loki data source, alerting framework, log queries)\n2. What's the minimal delta (likely just a new alert condition type)\n3. What invariants must be preserved (alert evaluation loop, state machine)\n4. What repo conventions to follow (how other data sources integrate)", "vague_prompt": "I want alerts when certain log patterns appear in Loki", "available_context": {}, "ground_truth": {"already_exists": ["pkg/services/ngalert/ - unified alerting framework", "pkg/tsdb/loki/ - Loki data source", "pkg/services/ngalert/eval/ - alert evaluation"], "minimal_delta": ["New log-based condition type in ngalert", "Loki query adapter for alert evaluation"], "invariants": ["Alert state machine (Normal -> Pending -> Firing)", "Evaluation interval constraints", "Notification routing unchanged"], "conventions": ["Data sources implement QueryData interface", "Alert conditions are pluggable", "State stored in annotation database"]}, "evaluation_criteria": {"success_signals": ["Identifies ngalert as the alerting system", "Recognizes Loki data source exists", "Proposes extending existing condition types", "Preserves alert state machine invariants"], "failure_signals": ["Proposes separate alerting system for logs", "Ignores existing ngalert framework", "Breaks alert state transitions"], "required_artifacts": ["list of what exists", "minimal changes needed", "invariants that must not change"], "scoring_rubric": {"correct_existing_system_analysis": 0.3, "minimal_delta_proposal": 0.3, "invariant_preservation": 0.25, "convention_adherence": 0.15}}, "difficulty": "expert", "tags": ["architecture-delta", "alerting", "minimal-change"], "created_at": "2025-12-29T18:00:44.997138+00:00"}
{"task_id": "elastic__elasticsearch-invariant_discovery-0ad5e2149099", "task_type": "invariant_discovery", "category": "A", "repo_name": "elastic/elasticsearch", "repo_url": "https://github.com/elastic/elasticsearch", "commit_hash": "HEAD", "scenario": "Task: \"Before modifying the cluster state update mechanism, identify all invariants.\"\n\nThe agent must discover:\n1. Consistency invariants (single master, monotonic version)\n2. Safety invariants (no data loss during rebalance)\n3. Liveness invariants (cluster must eventually converge)\n4. Ordering invariants (applied in version order)", "vague_prompt": "What invariants must I preserve when modifying cluster state updates?", "available_context": {}, "ground_truth": {"consistency_invariants": ["Single elected master at any time", "Cluster state version is monotonically increasing", "All nodes eventually see same cluster state"], "safety_invariants": ["No acknowledged write is lost", "Shard allocation respects replica count", "Primary promotion only when primary fails"], "liveness_invariants": ["Cluster converges to stable state", "Failed nodes are eventually removed", "Pending tasks are eventually processed"], "relevant_code": ["server/src/main/java/org/elasticsearch/cluster/ClusterState.java", "server/src/main/java/org/elasticsearch/cluster/coordination/", "server/src/main/java/org/elasticsearch/cluster/service/MasterService.java"]}, "evaluation_criteria": {"success_signals": ["Identifies master election invariants", "Recognizes cluster state versioning", "Mentions shard allocation safety", "References Raft-like consensus"], "failure_signals": ["Misses consistency requirements", "Ignores distributed systems invariants", "Proposes changes that could lose data"], "required_artifacts": ["list of invariants by category", "code locations enforcing each invariant", "test cases validating invariants"], "scoring_rubric": {"consistency_invariants": 0.25, "safety_invariants": 0.25, "liveness_invariants": 0.25, "code_references": 0.25}}, "difficulty": "expert", "tags": ["invariants", "distributed-systems", "cluster-state"], "created_at": "2025-12-29T18:00:44.997143+00:00"}
{"task_id": "microsoft__vscode-test_discovery_augmentation-681fbb3ca64b", "task_type": "test_discovery_augmentation", "category": "B", "repo_name": "microsoft/vscode", "repo_url": "https://github.com/microsoft/vscode", "commit_hash": "HEAD", "scenario": "A change is made to the extension host communication protocol.\n\nThe agent must:\n1. Discover existing tests for extension host\n2. Identify which tests cover the modified code path\n3. Determine if tests are in the correct layer (unit vs integration)\n4. Propose augmentations for missing coverage", "vague_prompt": "I changed the extension host protocol. What tests should I update?", "available_context": {}, "ground_truth": {"existing_tests": ["src/vs/workbench/api/test/", "src/vs/workbench/services/extensions/test/"], "test_layers": {"unit": "Protocol message serialization", "integration": "Extension activation", "e2e": "Extension actually works in VS Code"}, "coverage_gaps": ["Error handling for malformed messages", "Backward compatibility with old extensions", "Performance under message flood"]}, "evaluation_criteria": {"success_signals": ["Finds existing extension host tests", "Identifies correct test layer for change", "Proposes tests at multiple layers", "Considers backward compatibility testing"], "failure_signals": ["Only generates new tests, ignores existing", "Tests in wrong layer (e2e for unit-testable code)", "Misses error handling coverage"], "required_artifacts": ["list of relevant existing tests", "layer classification", "proposed test augmentations"], "scoring_rubric": {"test_discovery": 0.25, "layer_classification": 0.25, "gap_identification": 0.25, "augmentation_quality": 0.25}}, "difficulty": "hard", "tags": ["testing", "test-discovery", "extension-host"], "created_at": "2025-12-29T18:00:44.997146+00:00"}
{"task_id": "grafana__grafana-bug_to_regression_test-57cd7de15761", "task_type": "bug_to_regression_test", "category": "B", "repo_name": "grafana/grafana", "repo_url": "https://github.com/grafana/grafana", "commit_hash": "HEAD", "scenario": "Bug report: \"Dashboard fails to load when panel has null title and time range is 'now-5m to now'.\"\n\nThe agent must:\n1. Reproduce the exact conditions\n2. Create a regression test that fails before fix, passes after\n3. Ensure test is in correct layer (not too high, not too low)\n4. Avoid \"test passes but bug remains\" anti-pattern", "vague_prompt": "Create a regression test for this dashboard loading bug", "available_context": {}, "ground_truth": {"bug_conditions": ["panel.title === null (not empty string)", "time range uses relative 'now' syntax", "dashboard has more than one panel"], "correct_test_layer": "integration test in pkg/services/dashboards/", "anti_patterns_to_avoid": ["Testing only the fix, not the original condition", "Mocking away the actual failure", "E2E test that's flaky due to timing"], "regression_test_structure": {"setup": "Dashboard with null title panel + relative time", "action": "Load dashboard", "assertion": "Dashboard loads without error", "teardown": "Clean up test dashboard"}}, "evaluation_criteria": {"success_signals": ["Test reproduces exact bug conditions", "Test fails before fix is applied", "Test is at appropriate layer (not e2e for logic bug)", "Test assertions are specific to the bug"], "failure_signals": ["Test uses mocks that hide the bug", "Test only checks 'no error' without validating behavior", "Test is flaky or timing-dependent"], "required_artifacts": ["failing test code", "explanation of bug conditions", "verification that test catches the bug"], "scoring_rubric": {"exact_condition_reproduction": 0.3, "correct_layer": 0.2, "assertion_specificity": 0.25, "no_anti_patterns": 0.25}}, "difficulty": "hard", "tags": ["regression-test", "bug-reproduction", "testing"], "created_at": "2025-12-29T18:00:44.997148+00:00"}
{"task_id": "kubernetes__kubernetes-api_contract_analysis-1d040e70c0bc", "task_type": "api_contract_analysis", "category": "C", "repo_name": "kubernetes/kubernetes", "repo_url": "https://github.com/kubernetes/kubernetes", "commit_hash": "HEAD", "scenario": "Proposed change: Add a new field to PodSpec.\n\nThe agent must reason about:\n1. API compatibility (adding vs changing vs removing fields)\n2. Downstream consumers (kubectl, client-go, operators)\n3. Versioning (v1 vs v1beta1 implications)\n4. Rollout constraints (mixed version clusters)", "vague_prompt": "I want to add a new field to PodSpec. What should I consider?", "available_context": {}, "ground_truth": {"compatibility_rules": ["Adding optional fields is safe in v1", "New required fields need new API version", "Removing fields requires deprecation cycle"], "downstream_consumers": ["kubectl - needs updated schema", "client-go - regenerate clients", "operators - may depend on field presence", "cloud providers - GKE, EKS, AKS"], "rollout_constraints": ["Mixed version clusters during upgrade", "Old kubelets won't understand new fields", "Feature gates for gradual rollout"], "required_changes": ["staging/src/k8s.io/api/core/v1/types.go", "api/openapi-spec/swagger.json", "hack/update-codegen.sh"]}, "evaluation_criteria": {"success_signals": ["Mentions API compatibility rules", "Identifies downstream client impacts", "Considers mixed version clusters", "Proposes feature gate for rollout"], "failure_signals": ["Ignores versioning implications", "Misses downstream consumer impacts", "No consideration of rollback"], "required_artifacts": ["compatibility analysis", "list of affected consumers", "rollout plan with feature gate"], "scoring_rubric": {"compatibility_analysis": 0.25, "downstream_impact": 0.25, "rollout_plan": 0.25, "version_considerations": 0.25}}, "difficulty": "expert", "tags": ["api-contract", "cross-repo", "versioning"], "created_at": "2025-12-29T18:00:44.997151+00:00"}
{"task_id": "elastic__elasticsearch-downstream_impact-1657e83552af", "task_type": "downstream_impact", "category": "C", "repo_name": "elastic/elasticsearch", "repo_url": "https://github.com/elastic/elasticsearch", "commit_hash": "HEAD", "scenario": "Change: Modify the shard allocation response format.\n\nThe agent must identify:\n1. All consumers of this API (Kibana, Logstash, Beats, clients)\n2. Behavioral changes implied for consumers\n3. Breaking vs non-breaking classification\n4. Migration path for each consumer", "vague_prompt": "I'm changing the _cluster/allocation/explain API response. What breaks?", "available_context": {}, "ground_truth": {"consumers": ["Kibana - Cluster management UI", "Curator - Index lifecycle management", "Elastic Agent - Monitoring", "Java/Python/Go clients"], "behavioral_changes": {"Kibana": "UI may show wrong allocation reason", "Curator": "Allocation checks may fail", "Clients": "Deserialization may break"}, "breaking_classification": {"adding_field": "non-breaking", "removing_field": "breaking", "changing_type": "breaking", "changing_enum_values": "potentially breaking"}, "migration_path": ["Version response with 'version' field", "Support old format for N releases", "Document migration in CHANGELOG"]}, "evaluation_criteria": {"success_signals": ["Identifies Kibana as primary consumer", "Mentions client library impacts", "Proposes backward compatible approach", "Suggests versioning strategy"], "failure_signals": ["Only considers Elasticsearch internal", "Ignores external consumers", "Proposes breaking change without migration"], "required_artifacts": ["consumer impact matrix", "breaking change classification", "migration guide outline"], "scoring_rubric": {"consumer_identification": 0.25, "behavioral_analysis": 0.25, "breaking_classification": 0.25, "migration_path": 0.25}}, "difficulty": "expert", "tags": ["downstream-impact", "api-change", "multi-service"], "created_at": "2025-12-29T18:00:44.997153+00:00"}
{"task_id": "microsoft__vscode-safe_refactor-8fb7a9017c42", "task_type": "safe_refactor", "category": "D", "repo_name": "microsoft/vscode", "repo_url": "https://github.com/microsoft/vscode", "commit_hash": "HEAD", "scenario": "Refactor: Extract the command palette into a standalone module.\n\nThe agent must:\n1. Identify all usages of current implementation\n2. Define the public contract to preserve\n3. Plan incremental extraction (not big bang)\n4. Update tests, docs, and migration notes together", "vague_prompt": "Refactor the command palette to be more modular", "available_context": {}, "ground_truth": {"current_usages": ["Keyboard shortcuts (Ctrl+Shift+P)", "Extensions contributing commands", "Menu integration", "Telemetry hooks"], "public_contract": ["ICommandPalette interface", "Command registration API", "Keyboard binding integration"], "incremental_plan": ["1. Extract interfaces without changing impl", "2. Move impl behind interface", "3. Update consumers one by one", "4. Remove old locations"], "artifacts_to_update": ["Unit tests for new module", "Integration tests for consumers", "API documentation", "Extension authoring guide"]}, "evaluation_criteria": {"success_signals": ["Maps all current usages", "Defines preserved public interface", "Proposes incremental extraction", "Updates tests and docs together"], "failure_signals": ["Big bang refactor proposal", "Breaks public extension API", "Ignores test updates", "No migration notes"], "required_artifacts": ["usage map", "interface definition", "incremental PR plan", "test update plan"], "scoring_rubric": {"usage_mapping": 0.2, "contract_preservation": 0.3, "incremental_approach": 0.3, "artifact_updates": 0.2}}, "difficulty": "expert", "tags": ["refactor", "modularization", "safe-evolution"], "created_at": "2025-12-29T18:00:44.997158+00:00"}
{"task_id": "grafana__grafana-dependency_upgrade-0611d5797877", "task_type": "dependency_upgrade", "category": "D", "repo_name": "grafana/grafana", "repo_url": "https://github.com/grafana/grafana", "commit_hash": "HEAD", "scenario": "Upgrade: Go from 1.21 to 1.22.\n\nThe agent must:\n1. Identify breaking changes in Go 1.22\n2. Find code patterns affected\n3. Assess test coverage of affected areas\n4. Plan staged upgrade with validation", "vague_prompt": "Upgrade Grafana to Go 1.22", "available_context": {}, "ground_truth": {"breaking_changes": ["Loop variable semantics change", "Range over int", "Enhanced HTTP routing patterns"], "affected_code_patterns": ["Closures capturing loop variables", "for i := 0; i < n; i++ patterns", "http.HandleFunc usage"], "validation_plan": ["Run full test suite", "Check for loop variable warnings", "Benchmark performance-critical paths", "Test HTTP handlers specifically"], "staged_rollout": ["1. Update go.mod in separate PR", "2. Fix any immediate build breaks", "3. Run vet for new warnings", "4. Full regression test"]}, "evaluation_criteria": {"success_signals": ["Identifies loop variable change", "Searches for affected patterns", "Plans staged upgrade", "Includes validation steps"], "failure_signals": ["Just updates go.mod", "Ignores breaking changes", "No validation plan"], "required_artifacts": ["breaking change list", "affected code locations", "upgrade plan with PRs", "validation checklist"], "scoring_rubric": {"breaking_change_analysis": 0.3, "code_impact_assessment": 0.25, "staged_plan": 0.25, "validation_coverage": 0.2}}, "difficulty": "hard", "tags": ["dependency-upgrade", "go", "maintenance"], "created_at": "2025-12-29T18:00:44.997161+00:00"}
{"task_id": "kubernetes__kubernetes-dead_code_elimination-ff64d479ddeb", "task_type": "dead_code_elimination", "category": "D", "repo_name": "kubernetes/kubernetes", "repo_url": "https://github.com/kubernetes/kubernetes", "commit_hash": "HEAD", "scenario": "Task: Remove deprecated PodSecurityPolicy support.\n\nThe agent must:\n1. Find all PSP-related code (not just the obvious)\n2. Identify downstream dependencies on PSP\n3. Ensure no runtime code paths still reference PSP\n4. Update docs, tests, and feature gates together", "vague_prompt": "Remove PodSecurityPolicy code now that it's been deprecated", "available_context": {}, "ground_truth": {"obvious_locations": ["pkg/apis/policy/v1beta1/podsecuritypolicy*", "plugin/pkg/admission/podsecurity/"], "hidden_dependencies": ["RBAC roles granting PSP permissions", "Controller manager flags", "API server admission config", "e2e tests referencing PSP"], "runtime_references": ["Admission webhook configs", "Controller watch lists", "Audit log policies"], "artifacts_to_update": ["API deprecation docs", "Migration guide to Pod Security Admission", "Release notes", "Feature gate removal"]}, "evaluation_criteria": {"success_signals": ["Finds non-obvious PSP references", "Identifies RBAC implications", "Plans removal with migration docs", "Updates feature gates"], "failure_signals": ["Only removes obvious files", "Leaves broken RBAC roles", "No migration documentation"], "required_artifacts": ["complete PSP reference list", "dependency analysis", "removal PR sequence", "migration guide"], "scoring_rubric": {"completeness_of_discovery": 0.3, "hidden_dependency_finding": 0.25, "safe_removal_plan": 0.25, "documentation_updates": 0.2}}, "difficulty": "expert", "tags": ["dead-code", "deprecation", "safe-removal"], "created_at": "2025-12-29T18:00:44.997164+00:00"}
